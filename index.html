<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FinSignal 2.0 â€” FÄ±rsat YakalayÄ±cÄ±</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inconsolata:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#ffffff; --panel:#fafcff; --panel2:#f0f5ff;
  --border:#e2eaf5;
  --buy:#00a854; --sell:#e8192c; --hold:#d48800; --accent:#0078d4; --purple:#7b2ff7;
  --text:#1a2b45; --muted:#8ba0bb; --muted2:#5a7a9a;
  --font:'Space Grotesk',sans-serif; --mono:'Inconsolata',monospace;
}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--text);font-family:var(--font);min-height:100vh;overflow-x:hidden;font-size:15px}

/* HEADER */
.header{display:flex;align-items:center;justify-content:space-between;padding:14px 24px;border-bottom:1px solid var(--border);background:rgba(255,255,255,.97);position:sticky;top:0;z-index:100;box-shadow:0 1px 8px rgba(0,0,0,.06)}
.logo{display:flex;align-items:center;gap:10px}
.logo-mark{width:34px;height:34px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--purple));display:flex;align-items:center;justify-content:center;font-size:17px}
.logo-text{font-size:17px;font-weight:700;letter-spacing:-.5px}
.logo-sub{font-size:10px;color:var(--muted);font-family:var(--mono)}
.hstats{display:flex;gap:18px;align-items:center}
.hstat{text-align:center}
.hstat-val{font-family:var(--mono);font-size:13px;font-weight:700}
.hstat-lbl{font-size:9px;color:var(--muted);text-transform:uppercase;letter-spacing:1px}
.live{display:flex;align-items:center;gap:5px;background:rgba(0,168,84,.08);border:1px solid rgba(0,168,84,.3);padding:4px 10px;border-radius:20px;font-family:var(--mono);font-size:10px;color:var(--buy)}
.dot{width:5px;height:5px;background:var(--buy);border-radius:50%;animation:blink 1.5s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}

/* TICKER */
.ticker-wrap{background:#1e3a5f;overflow:hidden;padding:7px 0}
.ticker-track{display:flex;gap:32px;animation:scroll 50s linear infinite;white-space:nowrap}
@keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
.tick{display:inline-flex;align-items:center;gap:6px;font-family:var(--mono);font-size:12px}
.tick-sym{color:#fff;font-weight:700}
.tick-price{color:rgba(255,255,255,.55)}
.up{color:var(--buy)}.dn{color:var(--sell)}.nt{color:var(--hold)}

/* TABS */
.tabs{display:flex;gap:2px;padding:14px 24px 0;border-bottom:2px solid var(--border);background:var(--panel)}
.tab{padding:8px 18px;border-radius:6px 6px 0 0;font-size:13px;font-weight:600;cursor:pointer;border:1px solid transparent;border-bottom:none;color:var(--muted);background:transparent;transition:all .15s}
.tab.active{background:var(--bg);border-color:var(--border);border-bottom-color:var(--bg);color:var(--accent);margin-bottom:-2px}
.tab:hover:not(.active){color:var(--accent);background:var(--panel2)}
.tab-content{display:none}
.tab-content.active{display:block}

/* WRAP */
.wrap{max-width:1600px;margin:0 auto;padding:0 24px;position:relative}

/* GRID */
.g2{display:grid;grid-template-columns:1fr 1fr;gap:14px;padding:16px 0}
.g3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px;padding:16px 0}
.g4{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;padding:16px 0}
.g5{display:grid;grid-template-columns:repeat(5,1fr);gap:14px;padding:16px 0}
.gmain{display:grid;grid-template-columns:1fr 360px;gap:14px;padding:16px 0}
@media(max-width:1100px){.gmain{grid-template-columns:1fr}.g4{grid-template-columns:1fr 1fr}.g5{grid-template-columns:1fr 1fr}}
@media(max-width:700px){.g2,.g3,.g4,.g5{grid-template-columns:1fr}}

/* CARD */
.card{background:var(--panel);border:1px solid var(--border);border-radius:12px;overflow:hidden;box-shadow:0 1px 4px rgba(0,0,0,.04)}
.chead{padding:12px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;background:var(--panel2)}
.ctitle{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted2)}
.cbadge{font-family:var(--mono);font-size:10px;background:var(--panel);border:1px solid var(--border);padding:2px 8px;border-radius:4px;color:var(--muted)}
.snote{padding:10px 18px;font-size:11px;color:var(--muted);border-top:1px solid var(--border);background:var(--panel2);line-height:1.5}
.empty{padding:32px;text-align:center;color:var(--muted);font-size:13px}

/* KPI */
.kpi{padding:16px 18px}
.kpi-lbl{font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;font-family:var(--mono);margin-bottom:6px}
.kpi-val{font-size:28px;font-weight:700;line-height:1;margin-bottom:4px}
.kpi-sub{font-size:11px;color:var(--muted2);font-family:var(--mono)}
.gauge-track{height:6px;background:linear-gradient(90deg,var(--sell),var(--hold),var(--buy));border-radius:4px;position:relative;margin:8px 0 3px}
.gauge-needle{position:absolute;top:-4px;width:3px;height:14px;background:var(--text);border-radius:2px;transform:translateX(-50%);transition:left 1s ease}

/* TAGS */
.tag{display:inline-flex;align-items:center;padding:3px 8px;border-radius:4px;font-size:10px;font-family:var(--mono);font-weight:700;text-transform:uppercase;letter-spacing:.5px}
.tag-buy{background:rgba(0,168,84,.12);color:var(--buy);border:1px solid rgba(0,168,84,.3)}
.tag-sell{background:rgba(232,25,44,.12);color:var(--sell);border:1px solid rgba(232,25,44,.3)}
.tag-hold{background:rgba(212,136,0,.12);color:var(--hold);border:1px solid rgba(212,136,0,.3)}
.tag-watch{background:rgba(0,120,212,.12);color:var(--accent);border:1px solid rgba(0,120,212,.3)}

/* SCORE BADGE */
.score{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;font-family:var(--mono);font-weight:700;font-size:14px;flex-shrink:0}
.score-high{background:rgba(0,168,84,.15);color:var(--buy);border:2px solid rgba(0,168,84,.4)}
.score-med{background:rgba(212,136,0,.15);color:var(--hold);border:2px solid rgba(212,136,0,.4)}
.score-low{background:rgba(107,138,170,.15);color:var(--muted);border:2px solid rgba(107,138,170,.3)}

/* OPPORTUNITY CARD */
.opp{padding:16px 18px;border-bottom:1px solid var(--border);cursor:pointer;transition:background .1s}
.opp:hover{background:var(--panel2)}
.opp:last-child{border-bottom:none}
.opp-top{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.opp-asset{font-size:20px;font-weight:700;font-family:var(--mono);color:var(--text)}
.opp-pattern{font-size:10px;color:var(--muted);font-family:var(--mono);margin-top:2px}
.opp-text{font-size:13px;color:var(--muted2);line-height:1.6;margin-bottom:10px}
.opp-targets{display:flex;gap:8px;flex-wrap:wrap}
.tbox{display:flex;flex-direction:column;align-items:center;padding:5px 12px;border-radius:6px;font-family:var(--mono)}
.tbox-buy{background:rgba(0,168,84,.08);border:1px solid rgba(0,168,84,.25)}
.tbox-sell{background:rgba(232,25,44,.08);border:1px solid rgba(232,25,44,.25)}
.tbox-stop{background:rgba(212,136,0,.08);border:1px solid rgba(212,136,0,.25)}
.tbox-lbl{font-size:9px;color:var(--muted);text-transform:uppercase;letter-spacing:.5px}
.tbox-val{font-weight:700;font-size:12px;margin-top:2px}
.tbox-buy .tbox-val{color:var(--buy)}
.tbox-sell .tbox-val{color:var(--sell)}
.tbox-stop .tbox-val{color:var(--hold)}
.opp-footer{display:flex;align-items:center;gap:10px;margin-top:10px;flex-wrap:wrap}
.opp-pill{font-family:var(--mono);font-size:10px;color:var(--muted);background:var(--panel2);border:1px solid var(--border);padding:2px 8px;border-radius:10px}

/* TOP 3 CARDS */
.top3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;padding:16px 0}
@media(max-width:900px){.top3{grid-template-columns:1fr}}
.top-card{background:var(--panel);border:1px solid var(--border);border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.06)}
.top-card-header{padding:14px 18px;display:flex;align-items:center;justify-content:space-between}
.top-card-rank{font-size:11px;font-family:var(--mono);color:var(--muted);font-weight:700}
.top-card-asset{font-size:24px;font-weight:700;font-family:var(--mono);margin:4px 0}
.top-card-pattern{font-size:11px;color:var(--muted);font-family:var(--mono)}
.top-card-body{padding:14px 18px;border-top:1px solid var(--border)}
.top-card-text{font-size:13px;color:var(--muted2);line-height:1.6;margin-bottom:12px}
.top-card-targets{display:flex;gap:6px}
.top-card-footer{padding:12px 18px;border-top:1px solid var(--border);background:var(--panel2);display:flex;align-items:center;justify-content:space-between}
.top-card-amount{font-family:var(--mono);font-size:12px;font-weight:700;color:var(--accent)}
.top-card-rr{font-family:var(--mono);font-size:11px;color:var(--muted)}

/* PORTFOLIO */
.pos-row{padding:12px 18px;border-bottom:1px solid var(--border);display:grid;grid-template-columns:80px 1fr 100px 100px 80px;align-items:center;gap:10px;font-family:var(--mono);font-size:12px}
.pos-row:last-child{border-bottom:none}
.pos-row:hover{background:var(--panel2)}
.pos-head{background:var(--panel2);font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;font-weight:700}

/* HISTORY ROW */
.hrow{padding:11px 18px;border-bottom:1px solid var(--border);display:grid;grid-template-columns:70px 120px 1fr 80px 80px 100px 80px;align-items:center;gap:10px;font-family:var(--mono);font-size:11px}
.hrow:last-child{border-bottom:none}
.hrow:hover{background:var(--panel2)}
.hhead{background:var(--panel2);font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;font-weight:700}

/* WATCHLIST */
.watch-row{padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:14px}
.watch-row:last-child{border-bottom:none}
.watch-asset{font-family:var(--mono);font-size:16px;font-weight:700;min-width:60px}
.watch-reason{font-size:12px;color:var(--muted2);flex:1;line-height:1.5}
.watch-trigger{font-family:var(--mono);font-size:11px;color:var(--hold);background:rgba(212,136,0,.08);border:1px solid rgba(212,136,0,.3);padding:3px 10px;border-radius:4px}

/* BIST GRID */
.bist-grid{display:grid;grid-template-columns:1fr 1fr}
.bist-cell{padding:14px 18px;border-right:1px solid var(--border);border-bottom:1px solid var(--border)}
.bist-cell:nth-child(2n){border-right:none}
.bist-cell:nth-child(3),.bist-cell:nth-child(4){border-bottom:none}
.bist-sym{font-size:11px;color:var(--muted);font-family:var(--mono);margin-bottom:4px}
.bist-price{font-size:20px;font-weight:700;font-family:var(--mono)}
.bist-chg{font-size:12px;font-family:var(--mono);margin-top:2px}

/* FON GRID */
.fon-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}
.fon-cell{padding:14px 18px;border-right:1px solid var(--border);border-bottom:1px solid var(--border)}
.fon-code{font-family:var(--mono);font-size:15px;font-weight:700;margin-bottom:4px}
.fon-text{font-size:11px;color:var(--muted2);line-height:1.4;margin-bottom:6px}
.fon-by{font-family:var(--mono);font-size:10px;color:var(--muted)}

/* MISSED */
.missed-row{padding:12px 18px;border-bottom:1px solid var(--border);display:flex;align-items:flex-start;gap:12px}
.missed-icon{font-size:20px;flex-shrink:0;margin-top:2px}
.missed-asset{font-family:var(--mono);font-weight:700;font-size:14px;margin-bottom:3px}
.missed-reason{font-size:12px;color:var(--sell);line-height:1.5}
.missed-learn{font-size:11px;color:var(--muted);margin-top:4px;font-style:italic}

/* PORTFOY SUMMARY */
.port-total{padding:24px;text-align:center;border-bottom:1px solid var(--border)}
.port-total-val{font-size:40px;font-weight:700;font-family:var(--mono);margin-bottom:4px}
.port-total-lbl{font-size:12px;color:var(--muted);font-family:var(--mono)}
.port-layers{display:grid;grid-template-columns:1fr 1fr 1fr;border-bottom:1px solid var(--border)}
.port-layer{padding:16px;text-align:center;border-right:1px solid var(--border)}
.port-layer:last-child{border-right:none}
.port-layer-name{font-size:10px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
.port-layer-val{font-size:18px;font-weight:700;font-family:var(--mono)}
.port-layer-sub{font-size:10px;color:var(--muted);font-family:var(--mono);margin-top:2px}

/* PERF CHART BARS */
.perf-bar-wrap{padding:14px 18px}
.perf-bar-row{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.perf-bar-lbl{font-family:var(--mono);font-size:11px;color:var(--muted2);min-width:60px}
.perf-bar-track{flex:1;height:8px;background:var(--panel2);border-radius:4px;overflow:hidden}
.perf-bar-fill{height:100%;border-radius:4px;transition:width 1s ease}
.perf-bar-val{font-family:var(--mono);font-size:11px;min-width:45px;text-align:right}
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <div class="logo">
    <div class="logo-mark">ğŸ¯</div>
    <div>
      <div class="logo-text">FinSignal <span style="color:var(--accent)">2.0</span></div>
      <div class="logo-sub">FÄ±rsat YakalayÄ±cÄ± Agent</div>
    </div>
  </div>
  <div class="hstats">
    <div class="hstat"><div class="hstat-val up" id="hBTC">â€”</div><div class="hstat-lbl">BTC</div></div>
    <div class="hstat"><div class="hstat-val" id="hETH" style="color:var(--accent)">â€”</div><div class="hstat-lbl">ETH</div></div>
    <div class="hstat"><div class="hstat-val" id="hSPX" style="color:var(--hold)">â€”</div><div class="hstat-lbl">S&P 500</div></div>
    <div class="hstat"><div class="hstat-val" id="hGold" style="color:#d4a800">â€”</div><div class="hstat-lbl">ALTIN</div></div>
    <div class="hstat"><div class="hstat-val" id="hSilver" style="color:#9aafc4">â€”</div><div class="hstat-lbl">GÃœMÃœÅ</div></div>
    <div class="hstat"><div class="hstat-val" id="hTHYAO" style="color:var(--purple)">â€”</div><div class="hstat-lbl">THYAO</div></div>
    <div class="hstat"><div class="hstat-val" id="hFNG">â€”</div><div class="hstat-lbl">F&G</div></div>
    <div class="live"><span class="dot"></span><span id="updateTime">YÃ¼kleniyor</span></div>
  </div>
</div>

<!-- TICKER -->
<div class="ticker-wrap">
  <div class="ticker-track" id="ticker"><span style="color:rgba(255,255,255,.4);font-family:var(--mono);font-size:12px">YÃ¼kleniyor...</span></div>
</div>

<!-- TABS -->
<div class="wrap">
  <div class="tabs">
    <button class="tab active" onclick="switchTab('firsat',this)">ğŸ¯ FÄ±rsatlar</button>
    <button class="tab" onclick="switchTab('portfoy',this)">ğŸ’¼ PortfÃ¶y</button>
    <button class="tab" onclick="switchTab('piyasa',this)">ğŸ“Š Piyasa</button>
    <button class="tab" onclick="switchTab('gecmis',this)">ğŸ“‹ GeÃ§miÅŸ</button>
    <button class="tab" onclick="switchTab('izleme',this)">ğŸ‘ï¸ Ä°zleme</button>
  </div>
</div>

<!-- â•â•â• TAB: FIRSAT â•â•â• -->
<div class="tab-content active" id="tab-firsat">
<div class="wrap" style="padding-bottom:28px">

  <!-- KPI row -->
  <div class="g5">
    <div class="card">
      <div class="kpi">
        <div class="kpi-lbl">Piyasa Duygusu</div>
        <div class="kpi-val" id="kSentiment" style="color:var(--hold)">â€”</div>
        <div class="gauge-track"><div class="gauge-needle" id="gaugeNeedle" style="left:50%"></div></div>
        <div class="kpi-sub" id="kSentimentSub">yÃ¼kleniyor</div>
      </div>
    </div>
    <div class="card">
      <div class="kpi">
        <div class="kpi-lbl">BugÃ¼nkÃ¼ FÄ±rsatlar</div>
        <div class="kpi-val" style="color:var(--accent)" id="kOppCount">â€”</div>
        <div class="kpi-sub" id="kOppBreak">â€” yÃ¼ksek / â€” orta / â€” dÃ¼ÅŸÃ¼k</div>
      </div>
    </div>
    <div class="card">
      <div class="kpi">
        <div class="kpi-lbl">En Ä°yi FÄ±rsat ğŸ¯</div>
        <div style="padding-top:4px;font-size:13px;color:var(--buy);line-height:1.5;font-weight:600" id="kTopOpp">YÃ¼kleniyor...</div>
      </div>
    </div>
    <div class="card">
      <div class="kpi">
        <div class="kpi-lbl">Ana Risk âš ï¸</div>
        <div style="padding-top:4px;font-size:12px;color:var(--sell);line-height:1.5" id="kTopRisk">YÃ¼kleniyor...</div>
      </div>
    </div>
    <div class="card">
      <div class="kpi">
        <div class="kpi-lbl">GÃ¼nÃ¼n Ã–zeti</div>
        <div style="padding-top:4px;font-size:11px;color:var(--muted2);line-height:1.6" id="kSummary">YÃ¼kleniyor...</div>
      </div>
    </div>
  </div>

  <!-- TOP 3 -->
  <div style="margin-bottom:6px;display:flex;align-items:center;justify-content:space-between">
    <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted2)">ğŸ† En YÃ¼ksek Skorlu 3 FÄ±rsat</div>
    <div style="font-size:11px;color:var(--muted);font-family:var(--mono)">Skor: gerÃ§ek veriye dayalÄ± 0-10</div>
  </div>
  <div class="top3" id="top3Cards">
    <div class="card empty">FÄ±rsatlar yÃ¼kleniyor...</div>
  </div>

  <!-- TÃœM FIRSAT LÄ°STESÄ° -->
  <div class="card" style="margin-top:0">
    <div class="chead">
      <span class="ctitle">ğŸ“‹ TÃ¼m FÄ±rsatlar â€” Skor SÄ±rasÄ±</span>
      <span class="cbadge" id="oppDate">â€”</span>
    </div>
    <div id="oppList">
      <div class="empty">YÃ¼kleniyor...</div>
    </div>
    <div class="snote">âš ï¸ Veriler gerÃ§ek piyasa datasÄ±na dayalÄ± AI analizidir. YatÄ±rÄ±m tavsiyesi deÄŸildir. Her zaman stop-loss kullanÄ±n.</div>
  </div>

  <!-- TEFAS FON SÄ°NYALLERÄ° -->
  <div class="card" style="margin-top:14px">
    <div class="chead"><span class="ctitle">ğŸ¦ TEFAS Fon Ã–nerileri</span><span class="cbadge">GÃ¼nlÃ¼k AI Analiz</span></div>
    <div class="fon-grid" id="fonSignals">
      <div class="empty">YÃ¼kleniyor...</div>
    </div>
    <div class="snote">Para piyasasÄ±, altÄ±n ve gÃ¼mÃ¼ÅŸ fonlarÄ± iÃ§in gÃ¼nlÃ¼k AL/SAT/BEKLE analizi. Fiyat verisi gerÃ§ek, yorum AI tarafÄ±ndan Ã¼retilir.</div>
  </div>

</div>
</div>

<!-- â•â•â• TAB: PORTFÃ–Y â•â•â• -->
<div class="tab-content" id="tab-portfoy">
<div class="wrap" style="padding-bottom:28px">

  <div class="gmain">
    <div>
      <!-- PortfÃ¶y Ã–zet -->
      <div class="card" style="margin-top:16px">
        <div class="chead"><span class="ctitle">ğŸ’¼ Sanal PortfÃ¶y Durumu</span><span class="cbadge" id="portDate">â€”</span></div>
        <div class="port-total">
          <div class="port-total-lbl">Toplam DeÄŸer</div>
          <div class="port-total-val" id="portTotal">$0</div>
          <div style="display:flex;gap:16px;justify-content:center;margin-top:8px">
            <span style="font-family:var(--mono);font-size:12px;color:var(--muted)">YatÄ±rÄ±lan: <span id="portDeposited" style="color:var(--text)">$0</span></span>
            <span style="font-family:var(--mono);font-size:12px" id="portReturn">Getiri: â€”</span>
          </div>
        </div>
        <div class="port-layers">
          <div class="port-layer">
            <div class="port-layer-name">Katman 1 â€” GÃ¼venli</div>
            <div class="port-layer-val" id="portL1">$0</div>
            <div class="port-layer-sub">TEFAS Para PiyasasÄ±</div>
          </div>
          <div class="port-layer">
            <div class="port-layer-name">Katman 2 â€” Orta</div>
            <div class="port-layer-val" id="portL2">$0</div>
            <div class="port-layer-sub">AltÄ±n / BTC / ETH</div>
          </div>
          <div class="port-layer">
            <div class="port-layer-name">Katman 3 â€” Riskli</div>
            <div class="port-layer-val" id="portL3">$0</div>
            <div class="port-layer-sub">Anomali FÄ±rsatlarÄ±</div>
          </div>
        </div>
        <!-- AÃ§Ä±k Pozisyonlar -->
        <div class="chead" style="border-top:1px solid var(--border)"><span class="ctitle">AÃ§Ä±k Pozisyonlar</span></div>
        <div class="pos-row pos-head">
          <span>VarlÄ±k</span><span>GiriÅŸ</span><span>GÃ¼ncel</span><span>P&L</span><span>Katman</span>
        </div>
        <div id="portPositions">
          <div class="empty" style="padding:20px">HenÃ¼z aÃ§Ä±k pozisyon yok</div>
        </div>
      </div>

      <!-- KapalÄ± Ä°ÅŸlemler -->
      <div class="card" style="margin-top:14px">
        <div class="chead"><span class="ctitle">âœ… KapatÄ±lan Ä°ÅŸlemler</span><span class="cbadge" id="closedCount">0 iÅŸlem</span></div>
        <div id="portClosed">
          <div class="empty" style="padding:20px">HenÃ¼z kapatÄ±lan iÅŸlem yok</div>
        </div>
      </div>
    </div>

    <!-- SaÄŸ panel -->
    <div>
      <!-- Agent'Ä±n BugÃ¼nkÃ¼ Yorumu -->
      <div class="card" style="margin-top:16px">
        <div class="chead"><span class="ctitle">ğŸ¤– Agent GÃ¼nlÃ¼k Raporu</span></div>
        <div style="padding:18px" id="agentReport">
          <div style="font-size:12px;color:var(--muted2);line-height:1.8">YÃ¼kleniyor...</div>
        </div>
      </div>

      <!-- AylÄ±k Performans -->
      <div class="card" style="margin-top:14px">
        <div class="chead"><span class="ctitle">ğŸ“ˆ Katman PerformansÄ±</span></div>
        <div class="perf-bar-wrap" id="perfBars">
          <div style="font-size:12px;color:var(--muted);padding:8px 0">Veri birikmesi bekleniyor...</div>
        </div>
      </div>
    </div>
  </div>

</div>
</div>

<!-- â•â•â• TAB: PÄ°YASA â•â•â• -->
<div class="tab-content" id="tab-piyasa">
<div class="wrap" style="padding-bottom:28px">

  <div class="g2" style="padding-top:16px">

    <!-- BIST -->
    <div class="card">
      <div class="chead"><span class="ctitle">ğŸ‡¹ğŸ‡· BIST Hisseleri</span><span class="cbadge" id="bistTime">â€”</span></div>
      <div class="bist-grid">
        <div class="bist-cell">
          <div class="bist-sym">THYAO</div>
          <div class="bist-price" id="bTHYAO">â€”</div>
          <div class="bist-chg" id="bTHYAOc">â€”</div>
        </div>
        <div class="bist-cell">
          <div class="bist-sym">GARAN</div>
          <div class="bist-price" id="bGARAN">â€”</div>
          <div class="bist-chg" id="bGARANc">â€”</div>
        </div>
        <div class="bist-cell">
          <div class="bist-sym">ASELS</div>
          <div class="bist-price" id="bASELS">â€”</div>
          <div class="bist-chg" id="bASELSc">â€”</div>
        </div>
        <div class="bist-cell">
          <div class="bist-sym">EREGL</div>
          <div class="bist-price" id="bEREGL">â€”</div>
          <div class="bist-chg" id="bEREGLc">â€”</div>
        </div>
      </div>
    </div>

    <!-- Fear & Greed -->
    <div class="card">
      <div class="chead"><span class="ctitle">ğŸ˜¨ Fear & Greed Index</span><span class="cbadge">alternative.me</span></div>
      <div style="padding:20px">
        <div style="display:flex;align-items:center;gap:20px;margin-bottom:16px">
          <div style="width:90px;height:90px;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;border:4px solid var(--border);flex-shrink:0" id="fngCircle">
            <div style="font-size:28px;font-weight:700;font-family:var(--mono)" id="fngVal">â€”</div>
            <div style="font-size:9px;color:var(--muted);letter-spacing:1px">/100</div>
          </div>
          <div>
            <div style="font-size:22px;font-weight:700;margin-bottom:6px" id="fngLabel">â€”</div>
            <div style="font-size:11px;color:var(--muted2);line-height:1.9">
              0-24: AÅŸÄ±rÄ± Korku ğŸ˜±<br>
              25-49: Korku ğŸ˜¨<br>
              50-74: AÃ§gÃ¶zlÃ¼lÃ¼k ğŸ˜<br>
              75-100: AÅŸÄ±rÄ± AÃ§gÃ¶zlÃ¼lÃ¼k ğŸ¤‘
            </div>
          </div>
        </div>
        <div style="height:8px;background:linear-gradient(90deg,#e8192c,#d48800,#00a854);border-radius:4px;position:relative">
          <div id="fngNeedle" style="position:absolute;top:-4px;width:4px;height:16px;background:var(--text);border-radius:2px;transform:translateX(-50%);left:50%"></div>
        </div>
        <div style="font-size:11px;color:var(--muted);margin-top:10px;font-family:var(--mono)">F&G &lt; 20: Tarihsel alÄ±m fÄ±rsatÄ± | F&G &gt; 80: Dikkat, dÃ¼zeltme riski</div>
      </div>
    </div>
  </div>

  <!-- Kripto fiyatlarÄ± -->
  <div class="card">
    <div class="chead"><span class="ctitle">â‚¿ Kripto PiyasasÄ±</span><span class="cbadge">CoinGecko</span></div>
    <div style="display:grid;grid-template-columns:repeat(4,1fr)">
      <div style="padding:16px 20px;border-right:1px solid var(--border)">
        <div style="font-size:11px;color:var(--muted);font-family:var(--mono);margin-bottom:4px">BITCOIN</div>
        <div style="font-size:22px;font-weight:700;font-family:var(--mono)" id="cBTC">â€”</div>
        <div style="font-size:12px;font-family:var(--mono);margin-top:2px" id="cBTCc">â€”</div>
      </div>
      <div style="padding:16px 20px;border-right:1px solid var(--border)">
        <div style="font-size:11px;color:var(--muted);font-family:var(--mono);margin-bottom:4px">ETHEREUM</div>
        <div style="font-size:22px;font-weight:700;font-family:var(--mono)" id="cETH">â€”</div>
        <div style="font-size:12px;font-family:var(--mono);margin-top:2px" id="cETHc">â€”</div>
      </div>
      <div style="padding:16px 20px;border-right:1px solid var(--border)">
        <div style="font-size:11px;color:var(--muted);font-family:var(--mono);margin-bottom:4px">SOLANA</div>
        <div style="font-size:22px;font-weight:700;font-family:var(--mono)" id="cSOL">â€”</div>
        <div style="font-size:12px;font-family:var(--mono);margin-top:2px" id="cSOLc">â€”</div>
      </div>
      <div style="padding:16px 20px">
        <div style="font-size:11px;color:var(--muted);font-family:var(--mono);margin-bottom:4px">XRP</div>
        <div style="font-size:22px;font-weight:700;font-family:var(--mono)" id="cXRP">â€”</div>
        <div style="font-size:12px;font-family:var(--mono);margin-top:2px" id="cXRPc">â€”</div>
      </div>
    </div>
  </div>

  <!-- GÃ¼mÃ¼ÅŸ & AltÄ±n -->
  <div class="card" style="margin-top:14px">
    <div class="chead"><span class="ctitle">ğŸ¥ˆ GÃ¼mÃ¼ÅŸ & AltÄ±n Takibi</span><span class="cbadge">Yahoo Finance</span></div>
    <div style="display:grid;grid-template-columns:1fr 1fr">

      <!-- GÃœMÃœÅ USD -->
      <div style="padding:20px 24px;border-right:1px solid var(--border)">
        <div style="font-size:10px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px">GÃœMÃœÅ â€” DÃ¼nya (USD/oz)</div>
        <div style="display:flex;align-items:flex-end;gap:12px;margin-bottom:10px">
          <div style="font-size:32px;font-weight:700;font-family:var(--mono)" id="silverUSD">â€”</div>
          <div style="margin-bottom:6px">
            <div style="font-size:13px;font-family:var(--mono)" id="silverUSDc">â€”</div>
            <div style="font-size:10px;color:var(--muted);font-family:var(--mono)" id="silverUSDw">haftalÄ±k â€”</div>
          </div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px">
          <div style="background:var(--panel2);border:1px solid var(--border);border-radius:6px;padding:8px;text-align:center">
            <div style="font-size:9px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:.5px">1 Hafta</div>
            <div style="font-size:13px;font-weight:700;font-family:var(--mono);margin-top:3px" id="silverW1">â€”</div>
          </div>
          <div style="background:var(--panel2);border:1px solid var(--border);border-radius:6px;padding:8px;text-align:center">
            <div style="font-size:9px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:.5px">1 Ay</div>
            <div style="font-size:13px;font-weight:700;font-family:var(--mono);margin-top:3px" id="silverM1">â€”</div>
          </div>
          <div style="background:var(--panel2);border:1px solid var(--border);border-radius:6px;padding:8px;text-align:center">
            <div style="font-size:9px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:.5px">YTD</div>
            <div style="font-size:13px;font-weight:700;font-family:var(--mono);margin-top:3px" id="silverYTD">â€”</div>
          </div>
        </div>
        <div style="margin-top:10px;font-size:11px;color:var(--muted);font-family:var(--mono)">Au/Ag Oran: <span id="goldSilverRatio" style="color:var(--text);font-weight:700">â€”</span> <span style="color:var(--muted)">(80 Ã¼stÃ¼ = gÃ¼mÃ¼ÅŸ ucuz)</span></div>
      </div>

      <!-- GÃœMÃœÅ TRY -->
      <div style="padding:20px 24px">
        <div style="font-size:10px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px">GÃœMÃœÅ â€” TÃ¼rkiye (TRY/gram)</div>
        <div style="display:flex;align-items:flex-end;gap:12px;margin-bottom:10px">
          <div style="font-size:32px;font-weight:700;font-family:var(--mono)" id="silverTRY">â€”</div>
          <div style="margin-bottom:6px">
            <div style="font-size:13px;font-family:var(--mono)" id="silverTRYc">â€”</div>
            <div style="font-size:10px;color:var(--muted);font-family:var(--mono)" id="silverTRYw">haftalÄ±k â€”</div>
          </div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px">
          <div style="background:var(--panel2);border:1px solid var(--border);border-radius:6px;padding:8px;text-align:center">
            <div style="font-size:9px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:.5px">1 Hafta</div>
            <div style="font-size:13px;font-weight:700;font-family:var(--mono);margin-top:3px" id="silverTW1">â€”</div>
          </div>
          <div style="background:var(--panel2);border:1px solid var(--border);border-radius:6px;padding:8px;text-align:center">
            <div style="font-size:9px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:.5px">1 Ay</div>
            <div style="font-size:13px;font-weight:700;font-family:var(--mono);margin-top:3px" id="silverTM1">â€”</div>
          </div>
          <div style="background:var(--panel2);border:1px solid var(--border);border-radius:6px;padding:8px;text-align:center">
            <div style="font-size:9px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:.5px">YTD</div>
            <div style="font-size:13px;font-weight:700;font-family:var(--mono);margin-top:3px" id="silverTYTD">â€”</div>
          </div>
        </div>
        <div style="margin-top:10px;font-size:11px;color:var(--muted);font-family:var(--mono)">USD/TRY: <span id="usdtry" style="color:var(--text);font-weight:700">â€”</span></div>
      </div>
    </div>
    <div class="snote">GÃ¼mÃ¼ÅŸ verisi Yahoo Finance (SI=F) + USD/TRY kuru hesabÄ± ile. Gram fiyat = ons fiyatÄ± Ã· 32.15 Ã— kur.</div>
  </div>

  <!-- ETF Hacimleri -->
  <div class="card" style="margin-top:14px">
    <div class="chead"><span class="ctitle">ğŸ‡ºğŸ‡¸ ABD ETF Hacimleri</span><span class="cbadge">Yahoo Finance</span></div>
    <div id="etfGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr))">
      <div class="empty">YÃ¼kleniyor...</div>
    </div>
    <div class="snote">Hacim anomalisi = 20 gÃ¼nlÃ¼k ortalamaya gÃ¶re. 3x+ dikkat, 5x+ gÃ¼Ã§lÃ¼ sinyal.</div>
  </div>

  <!-- Trend Coinler -->
  <div class="card" style="margin-top:14px">
    <div class="chead"><span class="ctitle">ğŸ”¥ Trend VarlÄ±klar</span><span class="cbadge">CoinGecko</span></div>
    <div style="display:flex;flex-wrap:wrap;gap:8px;padding:16px 18px" id="trendBox">
      <div style="color:var(--muted);font-size:13px">YÃ¼kleniyor...</div>
    </div>
  </div>

</div>
</div>

<!-- â•â•â• TAB: GEÃ‡MÄ°Å â•â•â• -->
<div class="tab-content" id="tab-gecmis">
<div class="wrap" style="padding-bottom:28px">

  <!-- KaÃ§Ä±rÄ±lan FÄ±rsatlar -->
  <div class="card" style="margin-top:16px">
    <div class="chead"><span class="ctitle">ğŸ” Neden KaÃ§Ä±rdÄ±m? â€” GeÃ§miÅŸ Analiz</span><span class="cbadge">Otomatik Hesaplama</span></div>
    <div id="missedList">
      <div class="empty" style="padding:32px;text-align:center">
        <div style="font-size:32px;margin-bottom:12px">ğŸ”</div>
        <div style="font-size:14px;font-weight:600;margin-bottom:8px">HenÃ¼z veri yok</div>
        <div style="font-size:12px;color:var(--muted);line-height:1.8">
          7 gÃ¼n sonra sistem dÃ¼nkÃ¼ fÄ±rsatlarÄ± deÄŸerlendirecek.<br>
          "Bu fÄ±rsatÄ± neden yakalamadÄ±k? Skor yeterli miydi?" gibi sorulara yanÄ±t verecek.
        </div>
      </div>
    </div>
  </div>

  <!-- Karar GeÃ§miÅŸi -->
  <div class="card" style="margin-top:14px">
    <div class="chead"><span class="ctitle">ğŸ“‹ Karar GeÃ§miÅŸi</span><span class="cbadge">Son 90 GÃ¼n</span></div>
    <div class="hrow hhead">
      <span>Tarih</span><span>VarlÄ±k</span><span>Pattern</span><span>GiriÅŸ</span><span>Ã‡Ä±kÄ±ÅŸ</span><span>SonuÃ§</span><span>Skor</span>
    </div>
    <div id="historyFeed">
      <div class="empty" style="padding:32px;text-align:center">
        <div style="font-size:32px;margin-bottom:12px">ğŸ“Š</div>
        <div style="font-size:14px;font-weight:600;margin-bottom:8px">HenÃ¼z sonuÃ§lanan karar yok</div>
        <div style="font-size:12px;color:var(--muted);line-height:1.8">
          Her sabah 09:00'da kararlar kaydediliyor.<br>
          7 gÃ¼n sonra ilk sonuÃ§lar burada gÃ¶rÃ¼necek.<br>
          <span style="color:var(--accent);font-weight:600">Sistem <span id="startDate"></span> tarihinde baÅŸladÄ±.</span>
        </div>
      </div>
    </div>
    <div class="snote">âœ“ DoÄŸru sinyal &nbsp;|&nbsp; âœ— YanlÄ±ÅŸ sinyal &nbsp;|&nbsp; GeÃ§miÅŸ performans gelecek sonuÃ§larÄ± garanti etmez.</div>
  </div>

</div>
</div>

<!-- â•â•â• TAB: Ä°ZLEME â•â•â• -->
<div class="tab-content" id="tab-izleme">
<div class="wrap" style="padding-bottom:28px">

  <div class="g2" style="padding-top:16px">
    <!-- Watchlist -->
    <div class="card">
      <div class="chead"><span class="ctitle">ğŸ‘ï¸ Ä°zleme Listesi</span><span class="cbadge">HenÃ¼z Sinyal Yok</span></div>
      <div id="watchList">
        <div class="empty" style="padding:28px">
          <div style="font-size:28px;margin-bottom:10px">ğŸ‘ï¸</div>
          <div style="font-size:13px;font-weight:600;margin-bottom:6px">Takip Edilen VarlÄ±klar</div>
          <div style="font-size:11px;color:var(--muted);line-height:1.8">
            Compression pattern oluÅŸmuÅŸ ama henÃ¼z breakout vermemiÅŸ varlÄ±klar burada gÃ¶rÃ¼nÃ¼r.<br>
            Trigger seviyesine gelince FÄ±rsatlar sekmesine taÅŸÄ±nÄ±r.
          </div>
        </div>
      </div>
    </div>

    <!-- Pattern ReferansÄ± -->
    <div class="card">
      <div class="chead"><span class="ctitle">ğŸ“š Price Action Pattern Rehberi</span><span class="cbadge">Institutional</span></div>
      <div style="padding:16px 18px">
        <div style="display:flex;flex-direction:column;gap:12px">
          <div style="padding:12px;background:var(--panel2);border-radius:8px;border-left:3px solid var(--buy)">
            <div style="font-family:var(--mono);font-size:12px;font-weight:700;color:var(--buy);margin-bottom:4px">QML â€” Quasimodo Level</div>
            <div style="font-size:11px;color:var(--muted2);line-height:1.5">Ã–nceki Higher High kÄ±rÄ±ldÄ± ama hÄ±zla geri dÃ¶ndÃ¼. Kurumlar o noktada likidite topladÄ±. GÃ¼Ã§lÃ¼ reversal sinyali.</div>
          </div>
          <div style="padding:12px;background:var(--panel2);border-radius:8px;border-left:3px solid var(--sell)">
            <div style="font-family:var(--mono);font-size:12px;font-weight:700;color:var(--sell);margin-bottom:4px">FAKEOUT / STOP HUNT</div>
            <div style="font-size:11px;color:var(--muted2);line-height:1.5">Destek/direnÃ§ kÄ±rÄ±ldÄ± ama hemen geri dÃ¶ndÃ¼. Retail stop'lar tetiklendi, kurumlar o noktada pozisyon aÃ§tÄ±.</div>
          </div>
          <div style="padding:12px;background:var(--panel2);border-radius:8px;border-left:3px solid var(--hold)">
            <div style="font-family:var(--mono);font-size:12px;font-weight:700;color:var(--hold);margin-bottom:4px">COMPRESSION â†’ EXPANSION</div>
            <div style="font-size:11px;color:var(--muted2);line-height:1.5">Fiyat dar bantta sÄ±kÄ±ÅŸtÄ±, hacim dÃ¼ÅŸÃ¼k. BÃ¼yÃ¼k hareket iÃ§in hazÄ±rlÄ±k. Hacim patlarsa yÃ¶n belli olur.</div>
          </div>
          <div style="padding:12px;background:var(--panel2);border-radius:8px;border-left:3px solid var(--accent)">
            <div style="font-family:var(--mono);font-size:12px;font-weight:700;color:var(--accent);margin-bottom:4px">SUPPLY/DEMAND FLIP</div>
            <div style="font-size:11px;color:var(--muted2);line-height:1.5">Eski direnÃ§ yeni destek oldu. Fiyat o seviyeye geri dÃ¶ndÃ¼ ve tuttu. GÃ¼Ã§lÃ¼ giriÅŸ noktasÄ±.</div>
          </div>
          <div style="padding:12px;background:var(--panel2);border-radius:8px;border-left:3px solid var(--purple)">
            <div style="font-family:var(--mono);font-size:12px;font-weight:700;color:var(--purple);margin-bottom:4px">LIQUIDITY GRAB</div>
            <div style="font-size:11px;color:var(--muted2);line-height:1.5">Ã–nemli seviyenin hemen altÄ±/Ã¼stÃ¼ test edildi, hÄ±zla geri dÃ¶ndÃ¼. Kurumsal el izi. Hacimle gelirse Ã§ok gÃ¼Ã§lÃ¼.</div>
          </div>
          <div style="padding:12px;background:var(--panel2);border-radius:8px;border-left:3px solid var(--muted)">
            <div style="font-family:var(--mono);font-size:12px;font-weight:700;color:var(--muted2);margin-bottom:4px">VOLUME ANOMALÄ°SÄ°</div>
            <div style="font-size:11px;color:var(--muted2);line-height:1.5">3x normal = dikkat et. 5x+ = gÃ¼Ã§lÃ¼ sinyal. Fiyat hareket etmeden Ã¶nce hacim artÄ±ÅŸÄ± = en deÄŸerli sinyal.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
</div>

<script>
function switchTab(id, btn) {
  document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.getElementById('tab-'+id).classList.add('active');
  btn.classList.add('active');
}

function fmtPct(v) {
  const n = Number(v);
  return (n>=0?'+':'')+n.toFixed(2)+'%';
}
function fmtPrice(v, prefix='$') {
  return prefix+Number(v).toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2});
}
function scoreClass(s) {
  if(s>=7) return 'score-high';
  if(s>=4) return 'score-med';
  return 'score-low';
}
function getLabelTR(val) {
  if(val<=24) return 'AÅŸÄ±rÄ± Korku ğŸ˜±';
  if(val<=49) return 'Korku ğŸ˜¨';
  if(val<=74) return 'AÃ§gÃ¶zlÃ¼lÃ¼k ğŸ˜';
  return 'AÅŸÄ±rÄ± AÃ§gÃ¶zlÃ¼lÃ¼k ğŸ¤‘';
}
function getFGColor(val) {
  if(val<=24) return 'var(--sell)';
  if(val<=49) return '#e06c00';
  if(val<=74) return 'var(--buy)';
  return '#00c853';
}

document.getElementById('startDate').textContent = new Date().toLocaleDateString('tr-TR');

// LOAD DATA.JSON
fetch('data.json?t='+Date.now())
  .then(r=>r.json())
  .then(data=>{
    // Update time
    document.getElementById('updateTime').textContent = data.lastUpdate||'â€”';
    document.getElementById('oppDate').textContent = data.date||'â€”';
    document.getElementById('portDate').textContent = data.date||'â€”';

    // Header stats
    const p = data.prices||{};
    const btcP = p.btc?.price||0;
    const ethP = p.eth?.price||0;

    const hBTC = document.getElementById('hBTC');
    hBTC.textContent = '$'+Number(btcP).toLocaleString();
    hBTC.className = 'hstat-val '+(p.btc?.change24h>=0?'up':'dn');

    const hETH = document.getElementById('hETH');
    hETH.textContent = '$'+Number(ethP).toLocaleString();

    document.getElementById('hSPX').textContent = data.stocks?.spx ? Number(data.stocks.spx).toFixed(0) : 'â€”';
    document.getElementById('hGold').textContent = data.stocks?.gold ? '$'+Number(data.stocks.gold).toFixed(0) : 'â€”';

    // GÃ¼mÃ¼ÅŸ header
    if(data.silver?.usd) {
      const hs = document.getElementById('hSilver');
      hs.textContent = '$'+Number(data.silver.usd).toFixed(2);
      hs.className = 'hstat-val '+(data.silver.change24h>=0?'up':'dn');
    }

    // GÃ¼mÃ¼ÅŸ kartÄ± (Piyasa sekmesi)
    if(data.silver) {
      const s = data.silver;
      const usdtry = data.stocks?.usdtry || 0;

      // USD fiyatlarÄ±
      const usdPrice = s.usd || 0;
      document.getElementById('silverUSD').textContent = '$'+Number(usdPrice).toFixed(2);
      const c24 = s.change24h || 0;
      const c24el = document.getElementById('silverUSDc');
      c24el.textContent = fmtPct(c24)+' (24s)';
      c24el.style.color = c24>=0?'var(--buy)':'var(--sell)';

      const w1 = s.changeWeekly || 0;
      const m1 = s.changeMonthly || 0;
      const ytd = s.changeYTD || 0;

      const w1el = document.getElementById('silverW1');
      w1el.textContent = fmtPct(w1);
      w1el.style.color = w1>=0?'var(--buy)':'var(--sell)';

      const m1el = document.getElementById('silverM1');
      m1el.textContent = fmtPct(m1);
      m1el.style.color = m1>=0?'var(--buy)':'var(--sell)';

      const ytdel = document.getElementById('silverYTD');
      ytdel.textContent = fmtPct(ytd);
      ytdel.style.color = ytd>=0?'var(--buy)':'var(--sell)';

      // AltÄ±n/GÃ¼mÃ¼ÅŸ OranÄ±
      const goldPrice = data.stocks?.gold || 0;
      if(goldPrice && usdPrice) {
        const ratio = (goldPrice / usdPrice).toFixed(1);
        const ratioEl = document.getElementById('goldSilverRatio');
        ratioEl.textContent = ratio;
        ratioEl.style.color = ratio > 80 ? 'var(--buy)' : ratio < 60 ? 'var(--sell)' : 'var(--hold)';
      }

      // TRY fiyatlarÄ±
      if(usdtry > 0) {
        document.getElementById('usdtry').textContent = usdtry.toFixed(2)+'â‚º';
        const tryPerGram = (usdPrice / 32.1507) * usdtry;
        document.getElementById('silverTRY').textContent = tryPerGram.toFixed(2)+'â‚º';

        const tryc24el = document.getElementById('silverTRYc');
        tryc24el.textContent = fmtPct(c24)+' (24s)';
        tryc24el.style.color = c24>=0?'var(--buy)':'var(--sell)';

        const tw1el = document.getElementById('silverTW1');
        tw1el.textContent = fmtPct(w1);
        tw1el.style.color = w1>=0?'var(--buy)':'var(--sell)';

        const tm1el = document.getElementById('silverTM1');
        tm1el.textContent = fmtPct(m1);
        tm1el.style.color = m1>=0?'var(--buy)':'var(--sell)';

        const tytdel = document.getElementById('silverTYTD');
        tytdel.textContent = fmtPct(ytd);
        tytdel.style.color = ytd>=0?'var(--buy)':'var(--sell)';
      }
    }

    // BIST header
    if(data.bist?.thyao) {
      const ht = document.getElementById('hTHYAO');
      ht.textContent = Number(data.bist.thyao.price||0).toFixed(2)+'â‚º';
      ht.className = 'hstat-val '+(data.bist.thyao.change>=0?'up':'dn');
    }

    // Fear & Greed header
    if(data.fearGreed) {
      const fg = data.fearGreed;
      const hf = document.getElementById('hFNG');
      hf.textContent = fg.value+'/100';
      hf.style.color = getFGColor(fg.value);
    }

    // Sentiment
    const sent = data.marketSentiment||'NEUTRAL';
    const sc = sent==='BULLISH'?'var(--buy)':sent==='BEARISH'?'var(--sell)':'var(--hold)';
    const sentEl = document.getElementById('kSentiment');
    sentEl.textContent = sent==='BULLISH'?'YÃœKSELÄ°Å':sent==='BEARISH'?'DÃœÅÃœÅ':'NÃ–TR';
    sentEl.style.color = sc;
    document.getElementById('kSentimentSub').textContent = 'Skor: '+(data.sentimentScore||50)+'/100';
    document.getElementById('gaugeNeedle').style.left = (data.sentimentScore||50)+'%';
    document.getElementById('kTopOpp').textContent = data.topOpportunity||'â€”';
    document.getElementById('kTopRisk').textContent = data.topRisk||'â€”';
    document.getElementById('kSummary').textContent = data.summary||'â€”';

    // Kripto fiyatlarÄ± (piyasa sekmesi)
    const coins = [{id:'BTC',key:'btc'},{id:'ETH',key:'eth'},{id:'SOL',key:'sol'},{id:'XRP',key:'xrp'}];
    coins.forEach(c=>{
      const v = p[c.key]||{};
      const el = document.getElementById('c'+c.id);
      const elc = document.getElementById('c'+c.id+'c');
      if(el) el.textContent = '$'+Number(v.price||0).toLocaleString();
      if(elc) {
        elc.textContent = fmtPct(v.change24h||0);
        elc.className = 'bist-chg '+(v.change24h>=0?'up':'dn');
      }
    });

    // BIST
    if(data.bist) {
      const bistItems = [{key:'thyao',id:'THYAO'},{key:'garan',id:'GARAN'},{key:'asels',id:'ASELS'},{key:'eregl',id:'EREGL'}];
      bistItems.forEach(({key,id})=>{
        const v = data.bist[key]||{};
        const el = document.getElementById('b'+id);
        const elc = document.getElementById('b'+id+'c');
        if(el) el.textContent = Number(v.price||0).toFixed(2)+'â‚º';
        if(elc) {
          elc.textContent = fmtPct(v.change||0);
          elc.className = 'bist-chg '+(v.change>=0?'up':'dn');
        }
      });
      document.getElementById('bistTime').textContent = new Date().toLocaleTimeString('tr-TR',{hour:'2-digit',minute:'2-digit'});
    }

    // Fear & Greed
    if(data.fearGreed) {
      const fg = data.fearGreed;
      const val = fg.value||50;
      const fgColor = getFGColor(val);
      document.getElementById('fngVal').textContent = val;
      const fgLabel = document.getElementById('fngLabel');
      fgLabel.textContent = getLabelTR(val);
      fgLabel.style.color = fgColor;
      document.getElementById('fngCircle').style.borderColor = fgColor;
      document.getElementById('fngNeedle').style.left = val+'%';
    }

    // Ticker
    const b2 = data.bist||{};
    const ticks = [
      {s:'BTC', p:'$'+Number(p.btc?.price||0).toLocaleString(), c:p.btc?.change24h||0},
      {s:'ETH', p:'$'+Number(p.eth?.price||0).toLocaleString(), c:p.eth?.change24h||0},
      {s:'SOL', p:'$'+Number(p.sol?.price||0).toLocaleString(), c:p.sol?.change24h||0},
      {s:'XRP', p:'$'+Number(p.xrp?.price||0).toLocaleString(), c:p.xrp?.change24h||0},
      {s:'S&P', p:data.stocks?.spx?Number(data.stocks.spx).toFixed(0):'â€”', c:data.stocks?.spxChange||0},
      {s:'ALTIN', p:data.stocks?.gold?'$'+Number(data.stocks.gold).toFixed(0):'â€”', c:data.stocks?.goldChange||0},
      {s:'GÃœMÃœÅ', p:data.silver?.usd?'$'+Number(data.silver.usd).toFixed(2):'â€”', c:data.silver?.change24h||0},
      {s:'THYAO', p:b2.thyao?Number(b2.thyao.price).toFixed(2)+'â‚º':'â€”', c:b2.thyao?.change||0},
      {s:'GARAN', p:b2.garan?Number(b2.garan.price).toFixed(2)+'â‚º':'â€”', c:b2.garan?.change||0},
      {s:'ASELS', p:b2.asels?Number(b2.asels.price).toFixed(2)+'â‚º':'â€”', c:b2.asels?.change||0},
      {s:'F&G', p:(data.fearGreed?.value||'â€”')+'/100', c:0},
    ];
    document.getElementById('ticker').innerHTML = [...ticks,...ticks].map(t=>
      `<span class="tick"><span class="tick-sym">${t.s}</span><span class="tick-price">${t.p}</span>${t.c!==0?`<span class="${t.c>=0?'up':'dn'}">${fmtPct(t.c)}</span>`:''}</span>`
    ).join('');

    // Trend coinler
    if(data.trendingCoins?.length) {
      document.getElementById('trendBox').innerHTML = data.trendingCoins.map((c,i)=>
        `<span style="background:var(--panel);border:1px solid var(--border);padding:5px 12px;border-radius:20px;font-size:12px;font-family:var(--mono)">#${i+1} ${c}</span>`
      ).join('');
    }

    // ETF hacimleri
    if(data.etf) {
      const etfEl = document.getElementById('etfGrid');
      const etfs = Object.entries(data.etf);
      if(etfs.length > 0) {
        etfEl.innerHTML = etfs.map(([sym, v])=>{
          const ratio = v.volumeRatio||1;
          const isAnomaly = ratio >= 3;
          const bg = ratio>=5?'rgba(0,168,84,.06)':ratio>=3?'rgba(212,136,0,.06)':'';
          const borderColor = ratio>=5?'var(--buy)':ratio>=3?'var(--hold)':'var(--border)';
          return `<div style="padding:14px 18px;border-right:1px solid var(--border);border-bottom:1px solid var(--border);background:${bg}">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px">
              <span style="font-family:var(--mono);font-size:14px;font-weight:700">${sym}</span>
              ${isAnomaly?`<span style="font-family:var(--mono);font-size:10px;color:${borderColor};font-weight:700">${ratio.toFixed(1)}x ğŸ”¥</span>`:''}
            </div>
            <div style="font-size:18px;font-weight:700;font-family:var(--mono);margin-bottom:2px">${fmtPrice(v.price||0)}</div>
            <div style="font-size:11px;font-family:var(--mono)" class="${(v.change||0)>=0?'up':'dn'}">${fmtPct(v.change||0)}</div>
            <div style="font-size:10px;color:var(--muted);margin-top:4px;font-family:var(--mono)">Hacim: ${ratio.toFixed(1)}x ort.</div>
          </div>`;
        }).join('');
      } else {
        etfEl.innerHTML = '<div class="empty">ETF verisi henÃ¼z gelmedi</div>';
      }
    }

    // FIRSAT LÄ°STESÄ° - opportunities
    const opps = data.opportunities||[];
    const fonKodlari = ['YPT','YLB','YVD','YKT','YZG','YTD','TP2','PRY','HVT','PPT','PAB','PPI'];

    // FÄ±rsat sayÄ±sÄ±
    const high = opps.filter(o=>o.score>=7).length;
    const med = opps.filter(o=>o.score>=4&&o.score<7).length;
    const low = opps.filter(o=>o.score<4).length;
    document.getElementById('kOppCount').textContent = opps.length;
    document.getElementById('kOppBreak').textContent = `${high} yÃ¼ksek / ${med} orta / ${low} dÃ¼ÅŸÃ¼k`;

    // Top 3
    const top3 = opps.slice(0,3);
    const top3El = document.getElementById('top3Cards');
    if(top3.length > 0) {
      top3El.innerHTML = top3.map((o,i)=>{
        const tc = o.type==='BULL'?'var(--buy)':o.type==='BEAR'?'var(--sell)':'var(--hold)';
        const tl = o.type==='BULL'?'AL â–²':o.type==='BEAR'?'SAT â–¼':'BEKLE â—';
        const sc = o.score>=7?'score-high':o.score>=4?'score-med':'score-low';
        const medals = ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
        return `<div class="top-card" style="border-top:3px solid ${tc}">
          <div class="top-card-header">
            <div>
              <div class="top-card-rank">${medals[i]} #${i+1} FÄ±rsat</div>
              <div class="top-card-asset">${o.asset}</div>
              <div class="top-card-pattern">${o.pattern||'â€”'}</div>
            </div>
            <div style="text-align:right">
              <div class="score ${sc}" style="width:42px;height:42px;font-size:16px">${o.score||0}</div>
              <div style="font-size:10px;color:var(--muted);margin-top:4px;font-family:var(--mono)">/10</div>
            </div>
          </div>
          <div class="top-card-body">
            <div style="margin-bottom:8px"><span class="tag ${o.type==='BULL'?'tag-buy':o.type==='BEAR'?'tag-sell':'tag-hold'}">${tl}</span> <span style="font-family:var(--mono);font-size:10px;color:var(--muted)">${o.confidence||''} â€¢ ${o.timeframe||''}</span></div>
            <div class="top-card-text">${o.text||'â€”'}</div>
            <div class="top-card-targets">
              ${o.entry?`<div class="tbox tbox-buy"><div class="tbox-lbl">GiriÅŸ</div><div class="tbox-val">${o.entry}</div></div>`:''}
              ${o.target?`<div class="tbox tbox-sell"><div class="tbox-lbl">Hedef</div><div class="tbox-val">${o.target}</div></div>`:''}
              ${o.stopLoss?`<div class="tbox tbox-stop"><div class="tbox-lbl">Stop</div><div class="tbox-val">${o.stopLoss}</div></div>`:''}
            </div>
          </div>
          <div class="top-card-footer">
            <span class="top-card-amount">Ã–neri: ${o.suggestedAmount||'â€”'} (K${o.layer||'?'})</span>
            <span class="top-card-rr">R/R: ${o.riskReward||'â€”'}</span>
          </div>
        </div>`;
      }).join('');
    } else {
      top3El.innerHTML = '<div class="card empty" style="grid-column:1/-1;padding:32px">BugÃ¼n henÃ¼z fÄ±rsat Ã¼retilmedi</div>';
    }

    // TÃ¼m fÄ±rsat listesi (4-13)
    const restOpps = opps.slice(3);
    const oppListEl = document.getElementById('oppList');
    if(restOpps.length > 0) {
      oppListEl.innerHTML = restOpps.map(o=>{
        const tc = o.type==='BULL'?'var(--buy)':o.type==='BEAR'?'var(--sell)':'var(--hold)';
        const sc = o.score>=7?'score-high':o.score>=4?'score-med':'score-low';
        return `<div class="opp">
          <div class="opp-top">
            <div class="score ${sc}">${o.score||0}</div>
            <div style="flex:1">
              <div style="display:flex;align-items:center;gap:8px">
                <span class="opp-asset">${o.asset}</span>
                <span class="tag ${o.type==='BULL'?'tag-buy':o.type==='BEAR'?'tag-sell':'tag-hold'}">${o.type==='BULL'?'AL':o.type==='BEAR'?'SAT':'BEKLE'}</span>
              </div>
              <div class="opp-pattern">${o.pattern||''} â€¢ ${o.timeframe||''} â€¢ K${o.layer||'?'}</div>
            </div>
            <div style="font-family:var(--mono);font-size:11px;color:var(--muted)">${o.confidence||''}</div>
          </div>
          <div class="opp-text">${o.text||'â€”'}</div>
          <div class="opp-targets">
            ${o.entry?`<div class="tbox tbox-buy"><div class="tbox-lbl">GiriÅŸ</div><div class="tbox-val">${o.entry}</div></div>`:''}
            ${o.target?`<div class="tbox tbox-sell"><div class="tbox-lbl">Hedef</div><div class="tbox-val">${o.target}</div></div>`:''}
            ${o.stopLoss?`<div class="tbox tbox-stop"><div class="tbox-lbl">Stop</div><div class="tbox-val">${o.stopLoss}</div></div>`:''}
          </div>
          <div class="opp-footer">
            <span class="opp-pill">Ã–neri: ${o.suggestedAmount||'â€”'}</span>
            <span class="opp-pill">R/R: ${o.riskReward||'â€”'}</span>
          </div>
        </div>`;
      }).join('');
    } else if(opps.length === 0) {
      oppListEl.innerHTML = '<div class="empty" style="padding:28px">BugÃ¼n iÃ§in fÄ±rsat verisi henÃ¼z gelmedi â€” sistem sabah 09:00\'da Ã§alÄ±ÅŸÄ±r</div>';
    } else {
      oppListEl.innerHTML = '<div class="empty" style="padding:16px;font-size:12px;color:var(--muted)">Top 3 dÄ±ÅŸÄ±nda baÅŸka fÄ±rsat yok</div>';
    }

    // TEFAS fon sinyalleri - fonSignals alanÄ±ndan veya signals'dan filtrele
    const fonSigs = data.fonSignals || (data.signals||[]).filter(s=>fonKodlari.includes(s.asset));
    const fonEl = document.getElementById('fonSignals');
    if(fonEl && fonSigs.length > 0) {
      fonEl.innerHTML = fonSigs.map(s=>{
        const action = s.action||s.type;
        const tc = (action==='BULL'||action==='AL')?'var(--buy)':(action==='BEAR'||action==='SAT')?'var(--sell)':'var(--hold)';
        const tl = (action==='BULL'||action==='AL')?'AL':(action==='BEAR'||action==='SAT')?'SAT':'BEKLE';
        const bg = (action==='BULL'||action==='AL')?'rgba(0,168,84,.05)':(action==='BEAR'||action==='SAT')?'rgba(232,25,44,.05)':'rgba(212,136,0,.05)';
        return `<div class="fon-cell" style="background:${bg}">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
            <span class="fon-code">${s.asset}</span>
            <span style="font-size:11px;font-weight:700;color:${tc};padding:2px 8px;border-radius:4px;border:1px solid ${tc}">${tl}</span>
          </div>
          <div class="fon-text">${s.text||'â€”'}</div>
        </div>`;
      }).join('');
    } else if(fonEl) {
      fonEl.innerHTML = '<div class="empty">Fon sinyali henÃ¼z gelmedi</div>';
    }

    // Watchlist
    if(data.watchlist?.length > 0) {
      document.getElementById('watchList').innerHTML = data.watchlist.map(w=>
        `<div class="watch-row">
          <span class="watch-asset">${w.asset}</span>
          <span class="watch-reason">${w.reason||'â€”'}</span>
          <span class="watch-trigger">Trigger: ${w.triggerLevel||'â€”'}</span>
        </div>`
      ).join('');
    }

    // PortfÃ¶y
    if(data.portfolio) {
      const port = data.portfolio;
      document.getElementById('portTotal').textContent = '$'+Number(port.totalValue||0).toLocaleString();
      document.getElementById('portDeposited').textContent = '$'+Number(port.totalDeposited||0).toLocaleString();
      const ret = port.totalReturn||0;
      const retEl = document.getElementById('portReturn');
      retEl.textContent = 'Getiri: '+(ret>=0?'+':'')+ret.toFixed(2)+'%';
      retEl.style.color = ret>=0?'var(--buy)':'var(--sell)';

      const cash = port.cash||{};
      document.getElementById('portL1').textContent = '$'+Number(cash.layer1||0).toLocaleString();
      document.getElementById('portL2').textContent = '$'+Number(cash.layer2||0).toLocaleString();
      document.getElementById('portL3').textContent = '$'+Number(cash.layer3||0).toLocaleString();

      // Pozisyonlar
      if(port.positions?.length > 0) {
        document.getElementById('portPositions').innerHTML = port.positions.map(pos=>{
          const pnl = ((pos.currentPrice - pos.entryPrice) / pos.entryPrice * 100);
          return `<div class="pos-row">
            <span style="font-weight:700;font-family:var(--mono)">${pos.asset}</span>
            <span>$${Number(pos.entryPrice||0).toLocaleString()} â†’ $${Number(pos.currentPrice||0).toLocaleString()}</span>
            <span>$${Number(pos.amount||0).toLocaleString()}</span>
            <span class="${pnl>=0?'up':'dn'}">${fmtPct(pnl)}</span>
            <span style="color:var(--muted)">K${pos.layer||'?'}</span>
          </div>`;
        }).join('');
      }

      // Agent raporu
      if(port.agentReport) {
        document.getElementById('agentReport').innerHTML = `<div style="font-size:13px;color:var(--muted2);line-height:1.8">${port.agentReport}</div>`;
      }
    }

  })
  .catch(err=>{
    console.error('data.json yÃ¼klenemedi:', err);
    document.getElementById('oppList').innerHTML = '<div class="empty">âš ï¸ Veri baÄŸlantÄ±sÄ± kurulamadÄ±</div>';
  });

// HISTORY.JSON OKU
fetch('history.json?t='+Date.now())
  .then(r=>r.json())
  .then(hist=>{
    const signals = hist.signals||[];
    const checked = signals.filter(s=>s.resultChecked);
    const feed = document.getElementById('historyFeed');

    if(checked.length === 0) {
      const pending = signals.length;
      feed.innerHTML = `<div class="empty" style="padding:32px;text-align:center">
        <div style="font-size:32px;margin-bottom:12px">ğŸ“Š</div>
        <div style="font-size:14px;font-weight:600;margin-bottom:8px">HenÃ¼z sonuÃ§lanan karar yok</div>
        <div style="font-size:12px;color:var(--muted);line-height:2">
          ${pending>0?pending+' karar takipte â€” 7 gÃ¼n sonra sonuÃ§lar hesaplanacak.<br>':''}
          Her sabah 09:00'da kararlar kaydediliyor.
        </div>
      </div>`;
      return;
    }

    feed.innerHTML = checked.slice().reverse().map(s=>{
      const d = new Date(s.date);
      const tarih = d.toLocaleDateString('tr-TR',{day:'numeric',month:'short'});
      const entryP = s.entryPrices?.[s.asset?.toLowerCase()]||0;
      const pct = s.resultPct;
      const pctStr = pct!==null?(pct>=0?'+':'')+pct+'% '+(s.result==='CORRECT'?'âœ“':'âœ—'):'â€”';
      return `<div class="hrow">
        <span style="color:var(--muted)">${tarih}</span>
        <span style="font-weight:700;font-family:var(--mono)">${s.asset||'â€”'}</span>
        <span style="color:var(--muted);font-size:10px">${s.pattern||'â€”'}</span>
        <span>${entryP?'$'+Number(entryP).toLocaleString():'â€”'}</span>
        <span>${s.exitPrice?'$'+Number(s.exitPrice).toLocaleString():'â€”'}</span>
        <span class="${s.result==='CORRECT'?'up':'dn'}">${pctStr}</span>
        <span style="font-weight:700">${s.score||'â€”'}/10</span>
      </div>`;
    }).join('');

    // KaÃ§Ä±rÄ±lan fÄ±rsatlar
    const missed = checked.filter(s=>s.result==='WRONG'&&s.missedReason);
    if(missed.length > 0) {
      document.getElementById('missedList').innerHTML = missed.map(s=>
        `<div class="missed-row">
          <div class="missed-icon">âŒ</div>
          <div>
            <div class="missed-asset">${s.asset} â€” ${new Date(s.date).toLocaleDateString('tr-TR')}</div>
            <div class="missed-reason">${s.missedReason||'â€”'}</div>
            <div class="missed-learn">ğŸ“š Ã–ÄŸrenilen: ${s.lesson||'Analiz edilecek'}</div>
          </div>
        </div>`
      ).join('');
    }
  })
  .catch(()=>console.log('history.json henÃ¼z oluÅŸturulmamÄ±ÅŸ'));

// PORTFOLIO.JSON OKU
fetch('portfolio.json?t='+Date.now())
  .then(r=>r.json())
  .then(port=>{
    if(!port) return;
    document.getElementById('portTotal').textContent = '$'+Number(port.totalValue||0).toLocaleString();
    document.getElementById('portDeposited').textContent = '$'+Number(port.totalDeposited||0).toLocaleString();
    const ret = port.totalReturn||0;
    const retEl = document.getElementById('portReturn');
    retEl.textContent = 'Getiri: '+(ret>=0?'+':'')+Number(ret).toFixed(2)+'%';
    retEl.style.color = ret>=0?'var(--buy)':'var(--sell)';

    const cash = port.cash||{};
    document.getElementById('portL1').textContent = '$'+Number(cash.layer1||300).toLocaleString();
    document.getElementById('portL2').textContent = '$'+Number(cash.layer2||150).toLocaleString();
    document.getElementById('portL3').textContent = '$'+Number(cash.layer3||100).toLocaleString();

    if(port.positions?.length > 0) {
      document.getElementById('portPositions').innerHTML = port.positions.map(pos=>{
        const pnl = pos.entryPrice?((pos.currentPrice-pos.entryPrice)/pos.entryPrice*100):0;
        return `<div class="pos-row">
          <span style="font-weight:700;font-family:var(--mono)">${pos.asset}</span>
          <span style="font-family:var(--mono)">${fmtPrice(pos.entryPrice||0)} â†’ ${fmtPrice(pos.currentPrice||pos.entryPrice||0)}</span>
          <span style="font-family:var(--mono)">${fmtPrice(pos.amount||0)}</span>
          <span class="${pnl>=0?'up':'dn'}" style="font-family:var(--mono)">${fmtPct(pnl)}</span>
          <span style="color:var(--muted);font-family:var(--mono)">K${pos.layer||'?'}</span>
        </div>`;
      }).join('');
    }

    if(port.agentReport) {
      document.getElementById('agentReport').innerHTML = `<div style="font-size:13px;color:var(--muted2);line-height:1.8;white-space:pre-line">${port.agentReport}</div>`;
    }

    if(port.closedTrades?.length > 0) {
      document.getElementById('closedCount').textContent = port.closedTrades.length+' iÅŸlem';
      document.getElementById('portClosed').innerHTML = port.closedTrades.slice().reverse().map(t=>{
        const pnl = t.returnPct||0;
        return `<div class="pos-row">
          <span style="font-weight:700;font-family:var(--mono)">${t.asset}</span>
          <span style="font-family:var(--mono);font-size:10px">${fmtPrice(t.entryPrice||0)} â†’ ${fmtPrice(t.exitPrice||0)}</span>
          <span style="font-family:var(--mono)">${fmtPrice(t.amount||0)}</span>
          <span class="${pnl>=0?'up':'dn'}" style="font-family:var(--mono)">${fmtPct(pnl)}</span>
          <span style="color:var(--muted);font-family:var(--mono)">K${t.layer||'?'}</span>
        </div>`;
      }).join('');
    }
  })
  .catch(()=>console.log('portfolio.json henÃ¼z oluÅŸturulmamÄ±ÅŸ'));
</script>
</body>
</html>
